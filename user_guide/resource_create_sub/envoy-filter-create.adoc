= Creating Envoy Filters
:toc:
:toc-title:

The following describes how to create envoy filter resources.

== YAML Editor

Create a new envoy filter by using the YAML editor.

. Click *[Create Envoy Filters]* in the <<../console_menu_sub/service-mesh#img-envoy-filter-main,Envoy Filters>> main screen.
. Enter configuration data about an envoy filter to create in the YAML editor opened.
+
.Sample
[source,yaml]
----
apiVersion: networking.istio.io/v1alpha3
kind: EnvoyFilter
metadata:
  name: trace-sampling <1>
spec:
  workloadSelector: <2>
    labels:
      version: v1
  configPatches:
  - applyTo: NETWORK_FILTER <3>
    match:
      context: ANY
      listener:
        filterChain: <4>
          filter:
            name: "envoy.http_connection_manager"
    patch: <5>
      operation: MERGE
      value:
        typed_config:
          "@type": "type.googleapis.com/envoy.config.filter.network.http_connection_manager.v2.HttpConnectionManager"
          tracing:
            random_sampling:
              value: 99.9
          access_log:
            - name: envoy.file_access_log
              config:
                path: /dev/stdout
                format: '%PROTOCOL% %RESPONSE_CODE% %RESPONSE_FLAGS% %REQ(:METHOD)% '
----
+
<1> Envoy filter name
<2> Conditions for selecting a specific pod set to which the envoy filter applies (If not set, the configuration applies to all workload instances.)
<3> Location to apply a patch to
<4> Condition for applying a patch
<5> Information about a patch to apply

. To create the resource with the data you entered, click *[Create]*.